# Backend приложение "DogWalk"

Пётр и Антон решили открыть свой бизнес по выгулу собак в
своем доме. Они решили разработать приложение через которое
жильцы дома смогут направлять им заказы на выгул своих
питомцев. Петру и Антону срочно нужен бэкенд разработчик,
который поможет им разработать структуру БД и реализовать
ВЕЗТ-АРТ. И этим бэкенд разработчиком будете вы.


## Необходимое программное обеспечение для разворачивания системы
1. Распределенная система управления версиями Git;
2. Контейнеризатор приложений Docker и Docker-compose.  
**Для ОС Windows нужно установить Docker Desktop*

## Разворачивание системы локально

### Клонирование репозитория
Склонировать репозиторий локально при помощи HTTP/SSH (Если SSH ключи сгенерированы и открытый ключ добавлен в GitLab).

`git clone https://github.com/NikitaKorovykovskiy/DogWalk.git`


### Сборка приложения в Docker
Для сборки необходим предустановленный Docker и Docker Compose.  
1. Запустить Docker в свой операционной системе.
2. Сделать сборку приоложения командой `docker-compose up --build`, находясь в корне проекта.



### Миграции моделей 
Для заполнения базы данных таблицами необходимо провести миграции, для этого нужно выполнить несколько шагов:
1. Запустить контейнер backend в фоновом режиме командой `docker-compose up dw`  
**dw* - название сервиса в файле docker-compose.yml.
2. Исполняем миграции командой `docker-compose exec dw python manage.py migrate`
3. Удаляем контейнер  - `docker-compose down dw`

### Создание суперпользователя
Для взаимодействия с системой необходима учетная запись в административной панели.  
Создать её можно средствами фреймворка Django.  
1. Создаем контейнер с Django командой `docker-compose up dw -d`
2. Выполняем команду `docker-compose exec dw python manage.py createsuperuser`
3. Заполняем данные пользователя.
4. Удаляем контейнер командой `docker-compose down dw`

# API приложения

Задача:
1. Вывод уже оформленных заказов на указанную дату.

Данные оформленных заказов на указанную дату можно получить по ссылке
```
http://0.0.0.0:8000/api/walk_orders/?date=2024-08-07
```
В параметре `date` указывается необходимая для отображения дата

2. Оформление заказа.
Оформление заказа происходит через `POST` запрос

```
{
  "user": {
    "first_name": "john_doe",
    "phone": "89995552323"
  },
  "pet": {
    "name": "Buddy"
  },
  "walker": {
    "name": "Антон"
  },
  "start_time": "2024-08-07T11:00:00Z",
  "end_time": "2024-08-07T11:30:00Z",
  "comment": "Morning walk"
}
```
Где 
- `user` - заказчик с именем и номером телефона
- `pet` - питомец с кличкой
- `walker` - исполнитель
- `start_time` - время начала прогулки
- `end_time` - время окончания прогулки
- `comment` - комментарий


